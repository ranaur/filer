Here’s the refactor into a Python package with `pyproject.toml`, source under `filer/`, and a `tests/` suite.


```
filer/
├── pyproject.toml
├── README.md
├── filer
│ ├── __init__.py
│ ├── cli.py
│ ├── db.py
│ ├── commands
│ │ ├── __init__.py
│ │ ├── new.py
│ │ ├── root.py
│ │ ├── analyse.py
│ │ ├── dir.py
│ │ ├── check.py
│ │ └── dedup.py
├── tests
│ ├── __init__.py
│ ├── test_new.py
│ ├── test_root.py
│ ├── test_analyse.py
│ ├── test_dir.py
│ ├── test_check.py
│ └── test_dedup.py
```


---


### `pyproject.toml`
```toml
[build-system]
requires = ["setuptools", "wheel"]
build-backend = "setuptools.build_meta"


[project]
name = "filer"
version = "0.1.0"
description = "File inventory and deduplication tool with SQLite backend"
authors = [
{ name = "Your Name", email = "you@example.com" }
]
license = { text = "MIT" }
readme = "README.md"
requires-python = ">=3.8"


[project.scripts]
filer = "filer.cli:main"


[tool.pytest.ini_options]
testpaths = ["tests"]
```


---


### `filer/__init__.py`
```python
__version__ = "0.1.0"
```


---


### `filer/cli.py`
```python
import argparse
import sys
from filer.commands import new, root, analyse, dir, check, dedup




def main():
parser = argparse.ArgumentParser(prog="filer", description="File inventory and deduplication tool")
subparsers = parser.add_subparsers(dest="command", required=True)


# new
new.register_parser(subparsers)


# root
root.register_parser(subparsers)


# analyse
analyse.register_parser(subparsers)


# dir
dir.register_parser(subparsers)


# check
check.register_parser(subparsers)


# dedup
dedup.register_parser(subparsers)


args = parser.parse_args()
---